{'agent': {'messages': [AIMessage(content='', additional_kwargs={'tool_calls': [{'id': 'call_uRXdRSfaWbzJnbIoNY0o3qmZ', 'function': {'arguments': '{"filename":"test_img.jpg"}', 'name': 'agentic_extractor'}, 'type': 'function'}], 'refusal': None}, response_metadata={'token_usage': {'completion_tokens': 19, 'prompt_tokens': 196, 'total_tokens': 215, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 0, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-4o-mini-2024-07-18', 'system_fingerprint': 'fp_00428b782a', 'finish_reason': 'tool_calls', 'logprobs': None}, id='run-b35e754c-9b99-4b46-af74-b4ec1508f516-0', tool_calls=[{'name': 'agentic_extractor', 'args': {'filename': 'test_img.jpg'}, 'id': 'call_uRXdRSfaWbzJnbIoNY0o3qmZ', 'type': 'tool_call'}], usage_metadata={'input_tokens': 196, 'output_tokens': 19, 'total_tokens': 215, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 0}})]}}
----
{'tools': {'messages': [ToolMessage(content="description='Receipt' date='unknown' type='image' fruits=[product(product_format='Mandarine-0.814-kg-9.92-lei-7.51-lei'), product(product_format='Punga verde-0.12-BUC-2.54-lei-2.48-lei'), product(product_format='Punga verde-0.12-BUC-2.54-lei-2.48-lei')] vegetables=[product(product_format='Ardei-0.212-kg-11.69-lei-2.17-lei'), product(product_format='Fabio-0.212-kg-9.99-lei-2.99-lei')] shop_place='unknown' total_cost='45.34'", name='agentic_extractor', id='65e36529-21c2-456b-9716-189729dc2755', tool_call_id='call_uRXdRSfaWbzJnbIoNY0o3qmZ')]}}
----
{'agent': {'messages': [AIMessage(content='', additional_kwargs={'tool_calls': [{'id': 'call_7eyxq7tWUblQHoOrIMekkSHx', 'function': {'arguments': '{"filename":"test_img.jpg","description":"Receipt","type":"image"}', 'name': 'add_raw_to_db'}, 'type': 'function'}], 'refusal': None}, response_metadata={'token_usage': {'completion_tokens': 27, 'prompt_tokens': 379, 'total_tokens': 406, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 0, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-4o-mini-2024-07-18', 'system_fingerprint': 'fp_00428b782a', 'finish_reason': 'tool_calls', 'logprobs': None}, id='run-f40e3583-6b58-4d71-8b50-5e3ff940da1e-0', tool_calls=[{'name': 'add_raw_to_db', 'args': {'filename': 'test_img.jpg', 'description': 'Receipt', 'type': 'image'}, 'id': 'call_7eyxq7tWUblQHoOrIMekkSHx', 'type': 'tool_call'}], usage_metadata={'input_tokens': 379, 'output_tokens': 27, 'total_tokens': 406, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 0}})]}}
----
{'tools': {'messages': [ToolMessage(content='["successfully added to database collection", "document_id:InsertOneResult(ObjectId(\'67afbede21a21ebf17b7042b\'), acknowledged=True)"]', name='add_raw_to_db', id='d2da87b9-44ff-41fb-8f3b-bba4ccf857f5', tool_call_id='call_7eyxq7tWUblQHoOrIMekkSHx')]}}
----
{'agent': {'messages': [AIMessage(content='', additional_kwargs={'tool_calls': [{'id': 'call_xqq1L4FS06fbFrykPwD8ebXL', 'function': {'arguments': '{"user":"Giorgio","date":"unknown","sweets":[],"vegetables":["Ardei-0.212-kg-11.69-lei-2.17-lei","Fabio-0.212-kg-9.99-lei-2.99-lei"],"shop_place":"unknown","document_id":"67afbede21a21ebf17b7042b","total_cost":"45.34"}', 'name': 'add_receipts'}, 'type': 'function'}], 'refusal': None}, response_metadata={'token_usage': {'completion_tokens': 101, 'prompt_tokens': 451, 'total_tokens': 552, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 0, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-4o-mini-2024-07-18', 'system_fingerprint': 'fp_00428b782a', 'finish_reason': 'tool_calls', 'logprobs': None}, id='run-4af570af-8cf5-4f3d-89e3-16b250cb8283-0', tool_calls=[{'name': 'add_receipts', 'args': {'user': 'Giorgio', 'date': 'unknown', 'sweets': [], 'vegetables': ['Ardei-0.212-kg-11.69-lei-2.17-lei', 'Fabio-0.212-kg-9.99-lei-2.99-lei'], 'shop_place': 'unknown', 'document_id': '67afbede21a21ebf17b7042b', 'total_cost': '45.34'}, 'id': 'call_xqq1L4FS06fbFrykPwD8ebXL', 'type': 'tool_call'}], usage_metadata={'input_tokens': 451, 'output_tokens': 101, 'total_tokens': 552, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 0}})]}}
----
{'tools': {'messages': [ToolMessage(content='successfully added to database collection', name='add_receipts', id='76434ef2-5e7d-4219-ab56-efbc6ee06b71', tool_call_id='call_xqq1L4FS06fbFrykPwD8ebXL')]}}
----
{'agent': {'messages': [AIMessage(content='The receipt from the image "test_img.jpg" has been successfully processed and added to the database. Here are the details:\n\n- **Total Cost:** 45.34 lei\n- **Vegetables:**\n  - Ardei (0.212 kg) - 11.69 lei\n  - Fabio (0.212 kg) - 9.99 lei\n- **Fruits:**\n  - Mandarine (0.814 kg) - 9.92 lei\n  - Punga verde (0.12 BUC) - 2.54 lei (x2)\n- **Shop Place:** Unknown\n- **Date:** Unknown\n\nIf you need any further assistance, feel free to ask!', additional_kwargs={'refusal': None}, response_metadata={'token_usage': {'completion_tokens': 147, 'prompt_tokens': 566, 'total_tokens': 713, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 0, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-4o-mini-2024-07-18', 'system_fingerprint': 'fp_00428b782a', 'finish_reason': 'stop', 'logprobs': None}, id='run-bcaadd90-6df1-4658-8a70-160de7d853dc-0', usage_metadata={'input_tokens': 566, 'output_tokens': 147, 'total_tokens': 713, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 0}})]}}
----
Total Tokens: 3196
Prompt Tokens: 2744
Completion Tokens: 452
Total Cost (USD): $0.0006827999999999999
