{'agent': {'messages': [AIMessage(content='', additional_kwargs={'tool_calls': [{'id': 'call_WLxGbyHHyOE2Odx4aVVaTJs6', 'function': {'arguments': '{"collection_name":"receipts"}', 'name': 'update_display_read'}, 'type': 'function'}], 'refusal': None}, response_metadata={'token_usage': {'completion_tokens': 18, 'prompt_tokens': 301, 'total_tokens': 319, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 0, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-4o-mini-2024-07-18', 'system_fingerprint': 'fp_00428b782a', 'finish_reason': 'tool_calls', 'logprobs': None}, id='run-b2f79eed-7ff5-4c11-8540-1127deeb7a6f-0', tool_calls=[{'name': 'update_display_read', 'args': {'collection_name': 'receipts'}, 'id': 'call_WLxGbyHHyOE2Odx4aVVaTJs6', 'type': 'tool_call'}], usage_metadata={'input_tokens': 301, 'output_tokens': 18, 'total_tokens': 319, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 0}})]}}
----
{'tools': {'messages': [ToolMessage(content='{"yearly_cost": {"name": "yearly_cost", "description": "current year", "value": 30, "collection": "receipts", "tool": "get_receipts_info", "display": 1}}', name='update_display_read', id='c4992517-5422-4cd5-bfb4-1b2e17659cd6', tool_call_id='call_WLxGbyHHyOE2Odx4aVVaTJs6')]}}
----
{'agent': {'messages': [AIMessage(content='', additional_kwargs={'tool_calls': [{'id': 'call_k1a2TafSLP6a5nG6OWIdwr48', 'function': {'arguments': '{}', 'name': 'current_date'}, 'type': 'function'}], 'refusal': None}, response_metadata={'token_usage': {'completion_tokens': 11, 'prompt_tokens': 375, 'total_tokens': 386, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 0, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-4o-mini-2024-07-18', 'system_fingerprint': 'fp_13eed4fce1', 'finish_reason': 'tool_calls', 'logprobs': None}, id='run-0dcff1fa-3198-462e-8943-70e016ee1b23-0', tool_calls=[{'name': 'current_date', 'args': {}, 'id': 'call_k1a2TafSLP6a5nG6OWIdwr48', 'type': 'tool_call'}], usage_metadata={'input_tokens': 375, 'output_tokens': 11, 'total_tokens': 386, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 0}})]}}
----
{'tools': {'messages': [ToolMessage(content='2025-02-20', name='current_date', id='bd1e7e78-c33a-483f-ba9e-28d0f28cface', tool_call_id='call_k1a2TafSLP6a5nG6OWIdwr48')]}}
----
{'agent': {'messages': [AIMessage(content='', additional_kwargs={'tool_calls': [{'id': 'call_AzR70UJDiUZCJOUNrswULP9c', 'function': {'arguments': '{"start_date":"2025-01-01","end_date":"2025-02-20"}', 'name': 'get_receipts_info'}, 'type': 'function'}], 'refusal': None}, response_metadata={'token_usage': {'completion_tokens': 33, 'prompt_tokens': 399, 'total_tokens': 432, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 0, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-4o-mini-2024-07-18', 'system_fingerprint': 'fp_13eed4fce1', 'finish_reason': 'tool_calls', 'logprobs': None}, id='run-dda04c65-8bfb-4d48-ad63-254ec52c02e9-0', tool_calls=[{'name': 'get_receipts_info', 'args': {'start_date': '2025-01-01', 'end_date': '2025-02-20'}, 'id': 'call_AzR70UJDiUZCJOUNrswULP9c', 'type': 'tool_call'}], usage_metadata={'input_tokens': 399, 'output_tokens': 33, 'total_tokens': 432, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 0}})]}}
----
{'tools': {'messages': [ToolMessage(content='Error: UnboundLocalError("local variable \'total_cost\' referenced before assignment")\n Please fix your mistakes.', name='get_receipts_info', id='34003cd5-6ec0-4885-aef1-c6de9f84667b', tool_call_id='call_AzR70UJDiUZCJOUNrswULP9c', status='error')]}}
----
{'agent': {'messages': [AIMessage(content='', additional_kwargs={'tool_calls': [{'id': 'call_CUCwD1xyzN2fKG9NaMc5y4hB', 'function': {'arguments': '{}', 'name': 'update_display_write'}, 'type': 'function'}], 'refusal': None}, response_metadata={'token_usage': {'completion_tokens': 12, 'prompt_tokens': 463, 'total_tokens': 475, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 0, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-4o-mini-2024-07-18', 'system_fingerprint': 'fp_13eed4fce1', 'finish_reason': 'tool_calls', 'logprobs': None}, id='run-67581b8b-035c-4b67-a3c4-f667c5fb6a5b-0', tool_calls=[{'name': 'update_display_write', 'args': {}, 'id': 'call_CUCwD1xyzN2fKG9NaMc5y4hB', 'type': 'tool_call'}], usage_metadata={'input_tokens': 463, 'output_tokens': 12, 'total_tokens': 475, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 0}})]}}
----
{'tools': {'messages': [ToolMessage(content='Error: 1 validation error for update_display_write\ndata_extracted\n  Field required [type=missing, input_value={}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.10/v/missing\n Please fix your mistakes.', name='update_display_write', id='c8abd6dd-2d42-497f-b386-cd341e547228', tool_call_id='call_CUCwD1xyzN2fKG9NaMc5y4hB', status='error')]}}
----
{'agent': {'messages': [AIMessage(content="It seems there was an error while trying to update the displayed values from the receipts collection. Unfortunately, I'm not properly equipped to resolve this issue. Please try again later or consult with a human assistant for further assistance.", additional_kwargs={'refusal': None}, response_metadata={'token_usage': {'completion_tokens': 45, 'prompt_tokens': 538, 'total_tokens': 583, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 0, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-4o-mini-2024-07-18', 'system_fingerprint': 'fp_00428b782a', 'finish_reason': 'stop', 'logprobs': None}, id='run-e903784e-5ab5-4129-be86-b3d45379c67f-0', usage_metadata={'input_tokens': 538, 'output_tokens': 45, 'total_tokens': 583, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 0}})]}}
----
Total Tokens: 2195
Prompt Tokens: 2076
Completion Tokens: 119
Total Cost (USD): $0.0003828
