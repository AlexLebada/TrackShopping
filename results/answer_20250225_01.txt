{'agent': {'messages': [AIMessage(content='', additional_kwargs={'tool_calls': [{'id': 'call_CglRNc6lWAuriNdJ0ghWloVM', 'function': {'arguments': '{}', 'name': 'querying_collections'}, 'type': 'function'}], 'refusal': None}, response_metadata={'token_usage': {'completion_tokens': 13, 'prompt_tokens': 699, 'total_tokens': 712, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 0, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-4o-2024-08-06', 'system_fingerprint': 'fp_eb9dce56a8', 'finish_reason': 'tool_calls', 'logprobs': None}, id='run-c97fc5b5-e5bc-4775-bcb9-f2a6c0433c00-0', tool_calls=[{'name': 'querying_collections', 'args': {}, 'id': 'call_CglRNc6lWAuriNdJ0ghWloVM', 'type': 'tool_call'}], usage_metadata={'input_tokens': 699, 'output_tokens': 13, 'total_tokens': 712, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 0}})]}}
----
{'tools': {'messages': [ToolMessage(content='["Collection list: ", [{"name": "users", "description": "Collection with user information.\\nHas the following keys, with values format and type:\\nuser: as str\\ninfo: details given like email etc, as str\\nscope: for what user wants to use this app, as str\\nregister_date: as str "}, {"name": "receipts", "description": "Collection with user\'s complete receipts, with main informations extracted.\\nHas the following keys, with values format and type:\\nuser: as str\\ndate(format: 2023-10-05): as str\\nfruits(product format:name-quantity-unit-price unit-total price), as a list of string with products \\nvegetables(same format and type as fruits)\\nshop_place: store/market where bought from, as str\\ndocument_id: id of the raw file from which this document has been extracted, as a string\\ntotal_cost: total amount of the receipt(includes also other products), as int"}, {"name": "non-receipts", "description": "Collection with user\'s incomplete receipts/other formats, with main informations extracted.\\nHas the following keys, with values format and type:\\nuser: as str\\ndate(format: 2023-10-05): as str\\nfruits(product format:name-quantity-unit-price unit-total price), as a list of string with products \\nvegetables(same format and type as fruits)\\nshop_place: store/market where bought from, as str\\ndocument_id: id of the raw file from which this document has been extracted, as a string\\ntotal_cost: total amount of the receipt(includes also other products), as int"}]]', name='querying_collections', id='0e51d5a0-aa29-4168-8d08-bf25ab99de04', tool_call_id='call_CglRNc6lWAuriNdJ0ghWloVM')]}}
----
{'agent': {'messages': [AIMessage(content='', additional_kwargs={'tool_calls': [{'id': 'call_yaDHVnwGlLZBYej4gOAlcMtp', 'function': {'arguments': '{"collection_name": "receipts", "description": "Retrieve total spending on fruits", "request": "return all the spending made on fruits"}', 'name': 'agentic_retriever_data'}, 'type': 'function'}, {'id': 'call_1DBhF81CltqVoVrpYLm7Darv', 'function': {'arguments': '{"collection_name": "non-receipts", "description": "Retrieve total spending on fruits", "request": "return all the spending made on fruits"}', 'name': 'agentic_retriever_data'}, 'type': 'function'}], 'refusal': None}, response_metadata={'token_usage': {'completion_tokens': 95, 'prompt_tokens': 1077, 'total_tokens': 1172, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 0, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-4o-2024-08-06', 'system_fingerprint': 'fp_eb9dce56a8', 'finish_reason': 'tool_calls', 'logprobs': None}, id='run-26da4f2f-53ae-4195-be1d-f542a1c40a1b-0', tool_calls=[{'name': 'agentic_retriever_data', 'args': {'collection_name': 'receipts', 'description': 'Retrieve total spending on fruits', 'request': 'return all the spending made on fruits'}, 'id': 'call_yaDHVnwGlLZBYej4gOAlcMtp', 'type': 'tool_call'}, {'name': 'agentic_retriever_data', 'args': {'collection_name': 'non-receipts', 'description': 'Retrieve total spending on fruits', 'request': 'return all the spending made on fruits'}, 'id': 'call_1DBhF81CltqVoVrpYLm7Darv', 'type': 'tool_call'}], usage_metadata={'input_tokens': 1077, 'output_tokens': 95, 'total_tokens': 1172, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 0}})]}}
----
{'tools': {'messages': [ToolMessage(content='["Documents retrieved: ", []]', name='agentic_retriever_data', id='986bdc43-cbcc-4c2d-980e-7a279660fa0c', tool_call_id='call_yaDHVnwGlLZBYej4gOAlcMtp'), ToolMessage(content='["Documents retrieved: ", []]', name='agentic_retriever_data', id='00c348c3-c832-4f54-8f97-1ad219606393', tool_call_id='call_1DBhF81CltqVoVrpYLm7Darv')]}}
----
{'agent': {'messages': [AIMessage(content='It seems there are no records of spending on fruits in the available data. If you have any other requests or need further assistance, feel free to ask!', additional_kwargs={'refusal': None}, response_metadata={'token_usage': {'completion_tokens': 33, 'prompt_tokens': 1196, 'total_tokens': 1229, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 0, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 1152}}, 'model_name': 'gpt-4o-2024-08-06', 'system_fingerprint': 'fp_eb9dce56a8', 'finish_reason': 'stop', 'logprobs': None}, id='run-7a0cd2dc-7f9e-487b-a5a2-665d89b444e1-0', usage_metadata={'input_tokens': 1196, 'output_tokens': 33, 'total_tokens': 1229, 'input_token_details': {'audio': 0, 'cache_read': 1152}, 'output_token_details': {'audio': 0, 'reasoning': 0}})]}}
----
Total Tokens: 3795
Prompt Tokens: 3553
Completion Tokens: 242
Total Cost (USD): $0.0098625
