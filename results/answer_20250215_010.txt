{'agent': {'messages': [AIMessage(content='', additional_kwargs={'tool_calls': [{'id': 'call_FfR7oFcMxSgOUOxSDhDG5ms7', 'function': {'arguments': '{"filename":"test_img.jpg"}', 'name': 'agentic_extractor'}, 'type': 'function'}], 'refusal': None}, response_metadata={'token_usage': {'completion_tokens': 19, 'prompt_tokens': 196, 'total_tokens': 215, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 0, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-4o-mini-2024-07-18', 'system_fingerprint': 'fp_00428b782a', 'finish_reason': 'tool_calls', 'logprobs': None}, id='run-cf840751-204d-4ca8-b2f7-2558324b5a26-0', tool_calls=[{'name': 'agentic_extractor', 'args': {'filename': 'test_img.jpg'}, 'id': 'call_FfR7oFcMxSgOUOxSDhDG5ms7', 'type': 'tool_call'}], usage_metadata={'input_tokens': 196, 'output_tokens': 19, 'total_tokens': 215, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 0}})]}}
----
{'tools': {'messages': [ToolMessage(content="description='Receipt' date='unknown' type='image' fruits=[product(product_format='MANDARINE 0.814 KG x 9.22 7.51 B'), product(product_format='PUNGA VERDE x 0.12 0.12 A'), product(product_format='FM MARCU 1.000 BUC x 8.39 8.39 B')] vegetables=[product(product_format='ARDEI 0.212 KG x 11.69 2.54 B'), product(product_format='CEAPA 0.500 KG x 3.99 1.99 B'), product(product_format='TARHON 0.120 A x 3.75 0.12 A')] shop_place='unknown' total_cost='45.34'", name='agentic_extractor', id='63c55639-53e0-4d48-9934-4127561de258', tool_call_id='call_FfR7oFcMxSgOUOxSDhDG5ms7')]}}
----
{'agent': {'messages': [AIMessage(content='', additional_kwargs={'tool_calls': [{'id': 'call_khGI1zevFN5BTfbHaZ7VvvyV', 'function': {'arguments': '{"user":"Giorgio","date":"unknown","fruits":["MANDARINE 0.814 KG x 9.22 7.51 B","PUNGA VERDE x 0.12 0.12 A","FM MARCU 1.000 BUC x 8.39 8.39 B"],"vegetables":["ARDEI 0.212 KG x 11.69 2.54 B","CEAPA 0.500 KG x 3.99 1.99 B","TARHON 0.120 A x 3.75 0.12 A"],"shop_place":"unknown","document_id":"test_img.jpg","total_cost":"45.34"}', 'name': 'add_receipts'}, 'type': 'function'}], 'refusal': None}, response_metadata={'token_usage': {'completion_tokens': 160, 'prompt_tokens': 387, 'total_tokens': 547, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 0, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-4o-mini-2024-07-18', 'system_fingerprint': 'fp_00428b782a', 'finish_reason': 'tool_calls', 'logprobs': None}, id='run-42fbe495-3736-4c2d-8e68-63654ecdbd6d-0', tool_calls=[{'name': 'add_receipts', 'args': {'user': 'Giorgio', 'date': 'unknown', 'fruits': ['MANDARINE 0.814 KG x 9.22 7.51 B', 'PUNGA VERDE x 0.12 0.12 A', 'FM MARCU 1.000 BUC x 8.39 8.39 B'], 'vegetables': ['ARDEI 0.212 KG x 11.69 2.54 B', 'CEAPA 0.500 KG x 3.99 1.99 B', 'TARHON 0.120 A x 3.75 0.12 A'], 'shop_place': 'unknown', 'document_id': 'test_img.jpg', 'total_cost': '45.34'}, 'id': 'call_khGI1zevFN5BTfbHaZ7VvvyV', 'type': 'tool_call'}], usage_metadata={'input_tokens': 387, 'output_tokens': 160, 'total_tokens': 547, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 0}})]}}
----
{'tools': {'messages': [ToolMessage(content='successfully added to database collection', name='add_receipts', id='67b51f85-9818-4f7e-8e59-8a03bb18dfb3', tool_call_id='call_khGI1zevFN5BTfbHaZ7VvvyV')]}}
----
{'agent': {'messages': [AIMessage(content='The receipt from the image "test_img.jpg" has been successfully processed and added to the database. Here are the details:\n\n- **Fruits:**\n  - MANDARINE 0.814 KG x 9.22 7.51 B\n  - PUNGA VERDE x 0.12 0.12 A\n  - FM MARCU 1.000 BUC x 8.39 8.39 B\n\n- **Vegetables:**\n  - ARDEI 0.212 KG x 11.69 2.54 B\n  - CEAPA 0.500 KG x 3.99 1.99 B\n  - TARHON 0.120 A x 3.75 0.12 A\n\n- **Total Cost:** 45.34\n- **Shop Place:** Unknown\n- **Date:** Unknown\n\nIf you need any further assistance, feel free to ask!', additional_kwargs={'refusal': None}, response_metadata={'token_usage': {'completion_tokens': 197, 'prompt_tokens': 561, 'total_tokens': 758, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 0, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-4o-mini-2024-07-18', 'system_fingerprint': 'fp_00428b782a', 'finish_reason': 'stop', 'logprobs': None}, id='run-54c4c61f-049b-426d-ada4-588ad4def4ea-0', usage_metadata={'input_tokens': 561, 'output_tokens': 197, 'total_tokens': 758, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 0}})]}}
----
Total Tokens: 2837
Prompt Tokens: 2296
Completion Tokens: 541
Total Cost (USD): $0.0005922
