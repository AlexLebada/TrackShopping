{'agent': {'messages': [AIMessage(content='', additional_kwargs={'tool_calls': [{'id': 'call_xExm8gi6Fi5RyASD1bTPHbng', 'function': {'arguments': '{}', 'name': 'querying_collections'}, 'type': 'function'}], 'refusal': None}, response_metadata={'token_usage': {'completion_tokens': 13, 'prompt_tokens': 698, 'total_tokens': 711, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 0, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-4o-mini-2024-07-18', 'system_fingerprint': 'fp_709714d124', 'finish_reason': 'tool_calls', 'logprobs': None}, id='run-8fbcbdae-e2e7-499e-b63b-daa51aff139d-0', tool_calls=[{'name': 'querying_collections', 'args': {}, 'id': 'call_xExm8gi6Fi5RyASD1bTPHbng', 'type': 'tool_call'}], usage_metadata={'input_tokens': 698, 'output_tokens': 13, 'total_tokens': 711, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 0}})]}}
----
{'tools': {'messages': [ToolMessage(content='["Collection list: ", [{"name": "users", "description": "Collection with user information.\\nHas the following keys, with values format and type:\\nuser: as str\\ninfo: details given like email etc, as str\\nscope: for what user wants to use this app, as str\\nregister_date: as str "}, {"name": "receipts", "description": "Collection with user\'s complete receipts, with main informations extracted.\\nHas the following keys, with values format and type:\\nuser: as str\\ndate(format: 2023-10-05): as str\\nfruits(product format:name-quantity-unit-price unit-total price), as a list of string with products \\nvegetables(same format and type as fruits)\\nshop_place: store/market where bought from, as str\\ndocument_id: id of the raw file from which this document has been extracted, as a string\\ntotal_cost: total amount of the receipt(includes also other products), as int"}, {"name": "non-receipts", "description": "Collection with user\'s incomplete receipts/other formats, with main informations extracted.\\nHas the following keys, with values format and type:\\nuser: as str\\ndate(format: 2023-10-05): as str\\nfruits(product format:name-quantity-unit-price unit-total price), as a list of string with products \\nvegetables(same format and type as fruits)\\nshop_place: store/market where bought from, as str\\ndocument_id: id of the raw file from which this document has been extracted, as a string\\ntotal_cost: total amount of the receipt(includes also other products), as int"}]]', name='querying_collections', id='9b23e841-6106-4868-8fa7-2f7c1a435b5b', tool_call_id='call_xExm8gi6Fi5RyASD1bTPHbng')]}}
----
{'agent': {'messages': [AIMessage(content='', additional_kwargs={'tool_calls': [{'id': 'call_h8ly0ZENvz07IwU7y6HVbFmG', 'function': {'arguments': '{"collection_name": "receipts", "description": "Retrieve all fruits bought from receipts", "request": "sum of fruits"}', 'name': 'agentic_retriever_data'}, 'type': 'function'}, {'id': 'call_4OfO2zVacUPdqfYBQIMjaMrQ', 'function': {'arguments': '{"collection_name": "non-receipts", "description": "Retrieve all fruits bought from non-receipts", "request": "sum of fruits"}', 'name': 'agentic_retriever_data'}, 'type': 'function'}], 'refusal': None}, response_metadata={'token_usage': {'completion_tokens': 92, 'prompt_tokens': 1076, 'total_tokens': 1168, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 0, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-4o-mini-2024-07-18', 'system_fingerprint': 'fp_709714d124', 'finish_reason': 'tool_calls', 'logprobs': None}, id='run-660e384c-dcc0-4db2-85f9-712db055ef6d-0', tool_calls=[{'name': 'agentic_retriever_data', 'args': {'collection_name': 'receipts', 'description': 'Retrieve all fruits bought from receipts', 'request': 'sum of fruits'}, 'id': 'call_h8ly0ZENvz07IwU7y6HVbFmG', 'type': 'tool_call'}, {'name': 'agentic_retriever_data', 'args': {'collection_name': 'non-receipts', 'description': 'Retrieve all fruits bought from non-receipts', 'request': 'sum of fruits'}, 'id': 'call_4OfO2zVacUPdqfYBQIMjaMrQ', 'type': 'tool_call'}], usage_metadata={'input_tokens': 1076, 'output_tokens': 92, 'total_tokens': 1168, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 0}})]}}
----
{'tools': {'messages': [ToolMessage(content='["Documents retrieved: ", []]', name='agentic_retriever_data', id='cbbfbfce-47ad-447e-930e-a1d1476211c1', tool_call_id='call_h8ly0ZENvz07IwU7y6HVbFmG'), ToolMessage(content='["Documents retrieved: ", []]', name='agentic_retriever_data', id='f6dd241b-1117-4d55-a827-0fd01a979bee', tool_call_id='call_4OfO2zVacUPdqfYBQIMjaMrQ')]}}
----
{'agent': {'messages': [AIMessage(content='It appears that there are no records of fruits bought in either the receipts or non-receipts collections. Therefore, I cannot provide a sum for fruits that were bought.', additional_kwargs={'refusal': None}, response_metadata={'token_usage': {'completion_tokens': 36, 'prompt_tokens': 1192, 'total_tokens': 1228, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 0, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 1024}}, 'model_name': 'gpt-4o-mini-2024-07-18', 'system_fingerprint': 'fp_709714d124', 'finish_reason': 'stop', 'logprobs': None}, id='run-5f06cdf7-3209-4349-b049-ba9e433f2fdd-0', usage_metadata={'input_tokens': 1192, 'output_tokens': 36, 'total_tokens': 1228, 'input_token_details': {'audio': 0, 'cache_read': 1024}, 'output_token_details': {'audio': 0, 'reasoning': 0}})]}}
----
Total Tokens: 3920
Prompt Tokens: 3544
Completion Tokens: 376
Total Cost (USD): $0.0006804
