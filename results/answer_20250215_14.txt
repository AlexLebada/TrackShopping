{'agent': {'messages': [AIMessage(content='', additional_kwargs={'tool_calls': [{'id': 'call_uKjKJ6UFsyJDwMc9USoQBUJE', 'function': {'arguments': '{"filename":"test_img.jpg"}', 'name': 'agentic_extractor'}, 'type': 'function'}], 'refusal': None}, response_metadata={'token_usage': {'completion_tokens': 19, 'prompt_tokens': 229, 'total_tokens': 248, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 0, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-4o-mini-2024-07-18', 'system_fingerprint': 'fp_13eed4fce1', 'finish_reason': 'tool_calls', 'logprobs': None}, id='run-1cb2703f-9fb0-4cc5-87cd-4445b7cab781-0', tool_calls=[{'name': 'agentic_extractor', 'args': {'filename': 'test_img.jpg'}, 'id': 'call_uKjKJ6UFsyJDwMc9USoQBUJE', 'type': 'tool_call'}], usage_metadata={'input_tokens': 229, 'output_tokens': 19, 'total_tokens': 248, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 0}})]}}
----
{'tools': {'messages': [ToolMessage(content="description='Receipt' date='unknown' type='image' fruits=[product(product_format='Mandarine-0.814-kg-9.12-7.51'), product(product_format='Punga verde-0.12-BUC-2.54-2.48'), product(product_format='Punga verde-0.12-BUC-2.54-2.48')] vegetables=[product(product_format='Ardei-0.212-kg-11.69-2.47'), product(product_format='Banan-0.212-kg-9.99-2.12')] shop_place='unknown' total_cost='45.34'", name='agentic_extractor', id='0bb6a5bd-c642-4327-af0e-5491c3dea558', tool_call_id='call_uKjKJ6UFsyJDwMc9USoQBUJE')]}}
----
{'agent': {'messages': [AIMessage(content='', additional_kwargs={'tool_calls': [{'id': 'call_6zHNDTO3jacTbNNtXPBkhVc7', 'function': {'arguments': '{"filename":"test_img.jpg","description":"Receipt","type":"image"}', 'name': 'add_raw_to_db'}, 'type': 'function'}], 'refusal': None}, response_metadata={'token_usage': {'completion_tokens': 27, 'prompt_tokens': 392, 'total_tokens': 419, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 0, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-4o-mini-2024-07-18', 'system_fingerprint': 'fp_13eed4fce1', 'finish_reason': 'tool_calls', 'logprobs': None}, id='run-642afa73-a102-4dbf-8e37-9e70bab0ce49-0', tool_calls=[{'name': 'add_raw_to_db', 'args': {'filename': 'test_img.jpg', 'description': 'Receipt', 'type': 'image'}, 'id': 'call_6zHNDTO3jacTbNNtXPBkhVc7', 'type': 'tool_call'}], usage_metadata={'input_tokens': 392, 'output_tokens': 27, 'total_tokens': 419, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 0}})]}}
----
{'tools': {'messages': [ToolMessage(content='["successfully added metadata", "document_id:67afcc29ff554af0a759c529"]', name='add_raw_to_db', id='c4293ec1-6efe-49b4-a055-500c911971aa', tool_call_id='call_6zHNDTO3jacTbNNtXPBkhVc7')]}}
----
{'agent': {'messages': [AIMessage(content='', additional_kwargs={'tool_calls': [{'id': 'call_LECQUlIsE4KBNcHOnfCk7FBs', 'function': {'arguments': '{"user":"Giorgio","date":"unknown","fruits":["Mandarine-0.814-kg-9.12-7.51","Punga verde-0.12-BUC-2.54-2.48","Punga verde-0.12-BUC-2.54-2.48"],"vegetables":["Ardei-0.212-kg-11.69-2.47","Banan-0.212-kg-9.99-2.12"],"shop_place":"unknown","document_id":"67afcc29ff554af0a759c529","total_cost":"45.34"}', 'name': 'add_receipts'}, 'type': 'function'}], 'refusal': None}, response_metadata={'token_usage': {'completion_tokens': 145, 'prompt_tokens': 451, 'total_tokens': 596, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 0, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-4o-mini-2024-07-18', 'system_fingerprint': 'fp_13eed4fce1', 'finish_reason': 'tool_calls', 'logprobs': None}, id='run-b34d8e2a-8e7c-4e00-9c48-ff73061aeafb-0', tool_calls=[{'name': 'add_receipts', 'args': {'user': 'Giorgio', 'date': 'unknown', 'fruits': ['Mandarine-0.814-kg-9.12-7.51', 'Punga verde-0.12-BUC-2.54-2.48', 'Punga verde-0.12-BUC-2.54-2.48'], 'vegetables': ['Ardei-0.212-kg-11.69-2.47', 'Banan-0.212-kg-9.99-2.12'], 'shop_place': 'unknown', 'document_id': '67afcc29ff554af0a759c529', 'total_cost': '45.34'}, 'id': 'call_LECQUlIsE4KBNcHOnfCk7FBs', 'type': 'tool_call'}], usage_metadata={'input_tokens': 451, 'output_tokens': 145, 'total_tokens': 596, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 0}})]}}
----
{'tools': {'messages': [ToolMessage(content='successfully added to database collection', name='add_receipts', id='801897cb-40fa-40e7-8608-48a554243f27', tool_call_id='call_LECQUlIsE4KBNcHOnfCk7FBs')]}}
----
{'agent': {'messages': [AIMessage(content='The data from the image "test_img.jpg" has been successfully extracted and stored. Here are the details:\n\n- **Description**: Receipt\n- **Fruits**: \n  - Mandarine (0.814 kg) - 9.12\n  - Punga verde (0.12 BUC) - 2.54\n  - Punga verde (0.12 BUC) - 2.54\n- **Vegetables**: \n  - Ardei (0.212 kg) - 11.69\n  - Banan (0.212 kg) - 9.99\n- **Total Cost**: 45.34\n- **Shop Place**: Unknown\n- **Document ID**: 67afcc29ff554af0a759c529\n\nIf you need any further assistance, feel free to ask!', additional_kwargs={'refusal': None}, response_metadata={'token_usage': {'completion_tokens': 180, 'prompt_tokens': 610, 'total_tokens': 790, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 0, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-4o-mini-2024-07-18', 'system_fingerprint': 'fp_00428b782a', 'finish_reason': 'stop', 'logprobs': None}, id='run-c9c15a91-1d8d-48cb-8825-104da695ffc6-0', usage_metadata={'input_tokens': 610, 'output_tokens': 180, 'total_tokens': 790, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 0}})]}}
----
Total Tokens: 3343
Prompt Tokens: 2834
Completion Tokens: 509
Total Cost (USD): $0.0007305
