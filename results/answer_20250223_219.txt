{'agent': {'messages': [AIMessage(content='', additional_kwargs={'tool_calls': [{'id': 'call_2BRYqg74TEsN6HKgczJN6EPU', 'function': {'arguments': '{}', 'name': 'current_date'}, 'type': 'function'}], 'refusal': None}, response_metadata={'token_usage': {'completion_tokens': 11, 'prompt_tokens': 468, 'total_tokens': 479, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 0, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-4o-2024-11-20', 'system_fingerprint': 'fp_4dd9e4e381', 'finish_reason': 'tool_calls', 'logprobs': None}, id='run-8cee8025-2204-4700-a7a2-9dbb834479e2-0', tool_calls=[{'name': 'current_date', 'args': {}, 'id': 'call_2BRYqg74TEsN6HKgczJN6EPU', 'type': 'tool_call'}], usage_metadata={'input_tokens': 468, 'output_tokens': 11, 'total_tokens': 479, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 0}})]}}
----
{'tools': {'messages': [ToolMessage(content='2025-02-23', name='current_date', id='ced05c47-8824-4de6-b093-0e43184cd0b1', tool_call_id='call_2BRYqg74TEsN6HKgczJN6EPU')]}}
----
{'agent': {'messages': [AIMessage(content='', additional_kwargs={'tool_calls': [{'id': 'call_fVqebiHzSrcDWASkkHHrm2Bf', 'function': {'arguments': '{"collection_name":"receipts","mode":"check"}', 'name': 'cache_file_read'}, 'type': 'function'}], 'refusal': None}, response_metadata={'token_usage': {'completion_tokens': 22, 'prompt_tokens': 492, 'total_tokens': 514, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 0, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-4o-2024-11-20', 'system_fingerprint': 'fp_4dd9e4e381', 'finish_reason': 'tool_calls', 'logprobs': None}, id='run-f8b248ba-e6be-4c65-8c41-a4ecfb9a8137-0', tool_calls=[{'name': 'cache_file_read', 'args': {'collection_name': 'receipts', 'mode': 'check'}, 'id': 'call_fVqebiHzSrcDWASkkHHrm2Bf', 'type': 'tool_call'}], usage_metadata={'input_tokens': 492, 'output_tokens': 22, 'total_tokens': 514, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 0}})]}}
----
{'tools': {'messages': [ToolMessage(content='["data_extracted:", {"yearly_cost": {"name": "yearly_cost", "description": "result of total amount of spending per current year", "value": 45.34, "collection": "receipts", "tool": "get_receipts_info", "display": 1}, "monthly_cost": {"name": "monthly_cost", "description": "result of  total amount of spending last 2 months", "value": 45.34, "collection": "non-receipts", "tool": "get_receipts_info", "display": 1}, "daily_cost": {"name": "daily_cost", "description": "result of total amount of spending today", "value": 0, "collection": "receipts", "tool": "get_receipts_info", "display": 1}, "first_2_days_previous_month_cost": {"name": "first_2_days_previous_month_cost", "description": "result of total amount of spending first 2 days of the previous month", "value": 0, "collection": "receipts", "tool": "get_receipts_info", "display": 1}}]', name='cache_file_read', id='bb84600e-98cd-4b6d-876a-2048d618f233', tool_call_id='call_fVqebiHzSrcDWASkkHHrm2Bf')]}}
----
{'agent': {'messages': [AIMessage(content='', additional_kwargs={'tool_calls': [{'id': 'call_lk3gGkkZtvRwiTiu7xaHEIuU', 'function': {'arguments': '{"collection_name":"receipts","start_date":"2024-01-01","end_date":"2024-12-31"}', 'name': 'get_receipts_info'}, 'type': 'function'}], 'refusal': None}, response_metadata={'token_usage': {'completion_tokens': 39, 'prompt_tokens': 763, 'total_tokens': 802, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 0, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-4o-2024-11-20', 'system_fingerprint': 'fp_4dd9e4e381', 'finish_reason': 'tool_calls', 'logprobs': None}, id='run-c7a482d6-c626-48d8-b8a0-d6d6b18e67a4-0', tool_calls=[{'name': 'get_receipts_info', 'args': {'collection_name': 'receipts', 'start_date': '2024-01-01', 'end_date': '2024-12-31'}, 'id': 'call_lk3gGkkZtvRwiTiu7xaHEIuU', 'type': 'tool_call'}], usage_metadata={'input_tokens': 763, 'output_tokens': 39, 'total_tokens': 802, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 0}})]}}
----
{'tools': {'messages': [ToolMessage(content='45.34', name='get_receipts_info', id='94aff74a-f74e-491a-b36c-2d9787b5244b', tool_call_id='call_lk3gGkkZtvRwiTiu7xaHEIuU')]}}
----
{'agent': {'messages': [AIMessage(content='', additional_kwargs={'tool_calls': [{'id': 'call_zJ6BtkQ6rtOMrzEY13zTufLu', 'function': {'arguments': '{"mode":"update"}', 'name': 'cache_file_write'}, 'type': 'function'}], 'refusal': None}, response_metadata={'token_usage': {'completion_tokens': 16, 'prompt_tokens': 814, 'total_tokens': 830, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 0, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-4o-2024-11-20', 'system_fingerprint': 'fp_4dd9e4e381', 'finish_reason': 'tool_calls', 'logprobs': None}, id='run-6c22a1a4-4a63-4731-9eba-fd53d8d53ad9-0', tool_calls=[{'name': 'cache_file_write', 'args': {'mode': 'update'}, 'id': 'call_zJ6BtkQ6rtOMrzEY13zTufLu', 'type': 'tool_call'}], usage_metadata={'input_tokens': 814, 'output_tokens': 16, 'total_tokens': 830, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 0}})]}}
----
{'tools': {'messages': [ToolMessage(content="Error: 1 validation error for cache_file_write\ndata_extracted\n  Field required [type=missing, input_value={'mode': 'update'}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.10/v/missing\n Please fix your mistakes.", name='cache_file_write', id='b91e8770-6000-437b-8b91-b8b89659736d', tool_call_id='call_zJ6BtkQ6rtOMrzEY13zTufLu', status='error')]}}
----
{'agent': {'messages': [AIMessage(content='', additional_kwargs={'tool_calls': [{'id': 'call_nzRiXe5Bu7tiBDtVT80rI1Eq', 'function': {'arguments': '{"mode":"update","data_extracted":{"yearly_cost":{"name":"yearly_cost","description":"result of total amount of spending per current year","value":45.34,"collection":"receipts","tool":"get_receipts_info","display":1}}}', 'name': 'cache_file_write'}, 'type': 'function'}], 'refusal': None}, response_metadata={'token_usage': {'completion_tokens': 65, 'prompt_tokens': 898, 'total_tokens': 963, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 0, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-4o-2024-11-20', 'system_fingerprint': 'fp_4dd9e4e381', 'finish_reason': 'tool_calls', 'logprobs': None}, id='run-72c29f67-1d67-4a9a-b2fa-62153be47da7-0', tool_calls=[{'name': 'cache_file_write', 'args': {'mode': 'update', 'data_extracted': {'yearly_cost': {'name': 'yearly_cost', 'description': 'result of total amount of spending per current year', 'value': 45.34, 'collection': 'receipts', 'tool': 'get_receipts_info', 'display': 1}}}, 'id': 'call_nzRiXe5Bu7tiBDtVT80rI1Eq', 'type': 'tool_call'}], usage_metadata={'input_tokens': 898, 'output_tokens': 65, 'total_tokens': 963, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 0}})]}}
----
{'tools': {'messages': [ToolMessage(content='Successfully', name='cache_file_write', id='adb50635-bc5b-4512-8d4d-1a4ac04f87dd', tool_call_id='call_nzRiXe5Bu7tiBDtVT80rI1Eq')]}}
----
{'agent': {'messages': [AIMessage(content='The total amount spent last year (2024) is $45.34.', additional_kwargs={'refusal': None}, response_metadata={'token_usage': {'completion_tokens': 18, 'prompt_tokens': 972, 'total_tokens': 990, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 0, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-4o-2024-11-20', 'system_fingerprint': 'fp_4dd9e4e381', 'finish_reason': 'stop', 'logprobs': None}, id='run-aa9e3b23-c9ca-49e3-afc7-782a790df8e6-0', usage_metadata={'input_tokens': 972, 'output_tokens': 18, 'total_tokens': 990, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 0}})]}}
----
Total Tokens: 4578
Prompt Tokens: 4407
Completion Tokens: 171
Total Cost (USD): $0.0127275
