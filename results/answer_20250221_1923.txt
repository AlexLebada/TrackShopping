{'agent': {'messages': [AIMessage(content='', additional_kwargs={'tool_calls': [{'id': 'call_r5bMfW0MdKpdSbc5L9QW4ckh', 'function': {'arguments': '{"collection_name":"receipts","mode":"check"}', 'name': 'cache_file_read'}, 'type': 'function'}], 'refusal': None}, response_metadata={'token_usage': {'completion_tokens': 22, 'prompt_tokens': 457, 'total_tokens': 479, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 0, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-4o-2024-08-06', 'system_fingerprint': 'fp_fee4aaf18f', 'finish_reason': 'tool_calls', 'logprobs': None}, id='run-b55d5315-66b2-4e54-b56e-45803983eb18-0', tool_calls=[{'name': 'cache_file_read', 'args': {'collection_name': 'receipts', 'mode': 'check'}, 'id': 'call_r5bMfW0MdKpdSbc5L9QW4ckh', 'type': 'tool_call'}], usage_metadata={'input_tokens': 457, 'output_tokens': 22, 'total_tokens': 479, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 0}})]}}
----
{'tools': {'messages': [ToolMessage(content='["data_extracted:", {"yearly_cost": {"name": "yearly_cost", "description": "current year", "value": 45.34, "collection": "receipts", "tool": "get_receipts_info", "display": 1}, "monthly_cost": {"name": "monthly_cost", "description": "last 2 months", "value": 45.34, "collection": "non-receipts", "tool": "get_receipts_info", "display": 1}}]', name='cache_file_read', id='b8711afb-ec98-4ac1-beeb-d171c4a936da', tool_call_id='call_r5bMfW0MdKpdSbc5L9QW4ckh')]}}
----
{'agent': {'messages': [AIMessage(content='', additional_kwargs={'tool_calls': [{'id': 'call_tLikcxbojHnUizMz7jSQ1ZiA', 'function': {'arguments': '{}', 'name': 'current_date'}, 'type': 'function'}], 'refusal': None}, response_metadata={'token_usage': {'completion_tokens': 11, 'prompt_tokens': 595, 'total_tokens': 606, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 0, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-4o-2024-08-06', 'system_fingerprint': 'fp_fee4aaf18f', 'finish_reason': 'tool_calls', 'logprobs': None}, id='run-7e87c108-ae78-44e8-b8eb-3f2d8d680c47-0', tool_calls=[{'name': 'current_date', 'args': {}, 'id': 'call_tLikcxbojHnUizMz7jSQ1ZiA', 'type': 'tool_call'}], usage_metadata={'input_tokens': 595, 'output_tokens': 11, 'total_tokens': 606, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 0}})]}}
----
{'tools': {'messages': [ToolMessage(content='2025-02-21', name='current_date', id='de986c74-69ec-451d-ab30-91f246044cbb', tool_call_id='call_tLikcxbojHnUizMz7jSQ1ZiA')]}}
----
{'agent': {'messages': [AIMessage(content='', additional_kwargs={'tool_calls': [{'id': 'call_Owt9IKAUqM4idmimlkBOdkrE', 'function': {'arguments': '{"collection_name":"receipts","start_date":"2025-02-21","end_date":"2025-02-21"}', 'name': 'get_receipts_info'}, 'type': 'function'}], 'refusal': None}, response_metadata={'token_usage': {'completion_tokens': 39, 'prompt_tokens': 619, 'total_tokens': 658, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 0, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-4o-2024-08-06', 'system_fingerprint': 'fp_fee4aaf18f', 'finish_reason': 'tool_calls', 'logprobs': None}, id='run-a595a6b4-b95b-400d-920d-a7f148705313-0', tool_calls=[{'name': 'get_receipts_info', 'args': {'collection_name': 'receipts', 'start_date': '2025-02-21', 'end_date': '2025-02-21'}, 'id': 'call_Owt9IKAUqM4idmimlkBOdkrE', 'type': 'tool_call'}], usage_metadata={'input_tokens': 619, 'output_tokens': 39, 'total_tokens': 658, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 0}})]}}
----
{'tools': {'messages': [ToolMessage(content='0', name='get_receipts_info', id='3f1887ea-b18e-4b65-a267-dfa93f357445', tool_call_id='call_Owt9IKAUqM4idmimlkBOdkrE')]}}
----
{'agent': {'messages': [AIMessage(content='', additional_kwargs={'tool_calls': [{'id': 'call_2FkvI4PvMa59npBeoM7P3ozm', 'function': {'arguments': '{"mode":"add"}', 'name': 'cache_file_write'}, 'type': 'function'}], 'refusal': None}, response_metadata={'token_usage': {'completion_tokens': 16, 'prompt_tokens': 668, 'total_tokens': 684, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 0, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-4o-2024-08-06', 'system_fingerprint': 'fp_fee4aaf18f', 'finish_reason': 'tool_calls', 'logprobs': None}, id='run-629c1bac-3399-4c93-ac01-e0175d64be2b-0', tool_calls=[{'name': 'cache_file_write', 'args': {'mode': 'add'}, 'id': 'call_2FkvI4PvMa59npBeoM7P3ozm', 'type': 'tool_call'}], usage_metadata={'input_tokens': 668, 'output_tokens': 16, 'total_tokens': 684, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 0}})]}}
----
{'tools': {'messages': [ToolMessage(content="Error: 1 validation error for cache_file_write\ndata_extracted\n  Field required [type=missing, input_value={'mode': 'add'}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.10/v/missing\n Please fix your mistakes.", name='cache_file_write', id='bd724b39-0fcf-48e6-816b-cee7df90631e', tool_call_id='call_2FkvI4PvMa59npBeoM7P3ozm', status='error')]}}
----
{'agent': {'messages': [AIMessage(content='It seems I made an error while trying to add the daily total cost to the cache. Let me correct that.', additional_kwargs={'tool_calls': [{'id': 'call_Orz3CJrOpMjMYTjMWijt1CAc', 'function': {'arguments': '{"mode":"add","data_extracted":{"daily_cost":{"name":"daily_cost","description":"current day","value":0,"collection":"receipts","tool":"get_receipts_info","display":1}}}', 'name': 'cache_file_write'}, 'type': 'function'}], 'refusal': None}, response_metadata={'token_usage': {'completion_tokens': 79, 'prompt_tokens': 752, 'total_tokens': 831, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 0, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-4o-2024-08-06', 'system_fingerprint': 'fp_fee4aaf18f', 'finish_reason': 'tool_calls', 'logprobs': None}, id='run-6a7f3c73-5dd8-4d01-82e7-93577416ebd8-0', tool_calls=[{'name': 'cache_file_write', 'args': {'mode': 'add', 'data_extracted': {'daily_cost': {'name': 'daily_cost', 'description': 'current day', 'value': 0, 'collection': 'receipts', 'tool': 'get_receipts_info', 'display': 1}}}, 'id': 'call_Orz3CJrOpMjMYTjMWijt1CAc', 'type': 'tool_call'}], usage_metadata={'input_tokens': 752, 'output_tokens': 79, 'total_tokens': 831, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 0}})]}}
----
{'tools': {'messages': [ToolMessage(content='Successfully', name='cache_file_write', id='c0668aaa-3709-4cba-b91f-e23eac7a8176', tool_call_id='call_Orz3CJrOpMjMYTjMWijt1CAc')]}}
----
{'agent': {'messages': [AIMessage(content='The daily total cost from the "receipts" collection has been successfully added and set to be displayed.', additional_kwargs={'refusal': None}, response_metadata={'token_usage': {'completion_tokens': 23, 'prompt_tokens': 842, 'total_tokens': 865, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 0, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-4o-2024-08-06', 'system_fingerprint': 'fp_fee4aaf18f', 'finish_reason': 'stop', 'logprobs': None}, id='run-0adb4924-734f-47ae-a538-3a60e007d4c6-0', usage_metadata={'input_tokens': 842, 'output_tokens': 23, 'total_tokens': 865, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 0}})]}}
----
Total Tokens: 4123
Prompt Tokens: 3933
Completion Tokens: 190
Total Cost (USD): $0.0117325
