{'agent': {'messages': [AIMessage(content='', additional_kwargs={'tool_calls': [{'id': 'call_zfNnSWRylTV2b2U0GIc2q0R6', 'function': {'arguments': '{"filename":"bananas_receipt","description":"Receipt for bananas purchase","type":"non-receipts"}', 'name': 'add_raw_to_db'}, 'type': 'function'}], 'refusal': None}, response_metadata={'token_usage': {'completion_tokens': 34, 'prompt_tokens': 305, 'total_tokens': 339, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 0, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-4o-mini-2024-07-18', 'system_fingerprint': 'fp_00428b782a', 'finish_reason': 'tool_calls', 'logprobs': None}, id='run-4214eacf-4d16-4858-9db2-4fe1010b8b27-0', tool_calls=[{'name': 'add_raw_to_db', 'args': {'filename': 'bananas_receipt', 'description': 'Receipt for bananas purchase', 'type': 'non-receipts'}, 'id': 'call_zfNnSWRylTV2b2U0GIc2q0R6', 'type': 'tool_call'}], usage_metadata={'input_tokens': 305, 'output_tokens': 34, 'total_tokens': 339, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 0}})]}}
----
{'tools': {'messages': [ToolMessage(content="Error: 1 validation error for add_raw_to_db\ntype\n  Input should be 'image', 'audio' or 'text' [type=literal_error, input_value='non-receipts', input_type=str]\n    For further information visit https://errors.pydantic.dev/2.10/v/literal_error\n Please fix your mistakes.", name='add_raw_to_db', id='e86da87b-863c-4688-aca0-e96c5717fa09', tool_call_id='call_zfNnSWRylTV2b2U0GIc2q0R6', status='error')]}}
----
{'agent': {'messages': [AIMessage(content='', additional_kwargs={'tool_calls': [{'id': 'call_aRdqzopeB0epbyVquHhnr8s6', 'function': {'arguments': '{"filename":"bananas_receipt","description":"Receipt for bananas purchase","type":"text"}', 'name': 'add_raw_to_db'}, 'type': 'function'}], 'refusal': None}, response_metadata={'token_usage': {'completion_tokens': 31, 'prompt_tokens': 420, 'total_tokens': 451, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 0, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-4o-mini-2024-07-18', 'system_fingerprint': 'fp_00428b782a', 'finish_reason': 'tool_calls', 'logprobs': None}, id='run-c88821ef-24f1-4197-b483-5b91fe1f0262-0', tool_calls=[{'name': 'add_raw_to_db', 'args': {'filename': 'bananas_receipt', 'description': 'Receipt for bananas purchase', 'type': 'text'}, 'id': 'call_aRdqzopeB0epbyVquHhnr8s6', 'type': 'tool_call'}], usage_metadata={'input_tokens': 420, 'output_tokens': 31, 'total_tokens': 451, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 0}})]}}
----
{'tools': {'messages': [ToolMessage(content='["successfully added metadata", "document_id:67afd6b90705d14636aa29e0"]', name='add_raw_to_db', id='fea8a53d-ae09-45be-bd1f-8ad7edfb0082', tool_call_id='call_aRdqzopeB0epbyVquHhnr8s6')]}}
----
{'agent': {'messages': [AIMessage(content='', additional_kwargs={'tool_calls': [{'id': 'call_0qNUkLnm3pYXjxscCL6Rl5Jn', 'function': {'arguments': '{"user":"Giorgio","date":"2023-10-05","type":"non-receipts","fruits":["bananas"],"vegetables":[],"shop_place":"unknown","document_id":"67afd6b90705d14636aa29e0","total_cost":"20 RON"}', 'name': 'add_receipts'}, 'type': 'function'}], 'refusal': None}, response_metadata={'token_usage': {'completion_tokens': 74, 'prompt_tokens': 484, 'total_tokens': 558, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 0, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-4o-mini-2024-07-18', 'system_fingerprint': 'fp_00428b782a', 'finish_reason': 'tool_calls', 'logprobs': None}, id='run-ae14af8b-3d83-4ecd-9bda-74ec0443073d-0', tool_calls=[{'name': 'add_receipts', 'args': {'user': 'Giorgio', 'date': '2023-10-05', 'type': 'non-receipts', 'fruits': ['bananas'], 'vegetables': [], 'shop_place': 'unknown', 'document_id': '67afd6b90705d14636aa29e0', 'total_cost': '20 RON'}, 'id': 'call_0qNUkLnm3pYXjxscCL6Rl5Jn', 'type': 'tool_call'}], usage_metadata={'input_tokens': 484, 'output_tokens': 74, 'total_tokens': 558, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 0}})]}}
----
{'tools': {'messages': [ToolMessage(content='successfully added to database collection', name='add_receipts', id='dadf385f-6099-4683-9e3c-c7f70fb7671e', tool_call_id='call_0qNUkLnm3pYXjxscCL6Rl5Jn')]}}
----
{'agent': {'messages': [AIMessage(content='I have successfully recorded your purchase of bananas for 20 RON. If you have any more expenses to add, feel free to let me know!', additional_kwargs={'refusal': None}, response_metadata={'token_usage': {'completion_tokens': 32, 'prompt_tokens': 572, 'total_tokens': 604, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 0, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-4o-mini-2024-07-18', 'system_fingerprint': 'fp_00428b782a', 'finish_reason': 'stop', 'logprobs': None}, id='run-bfff34c1-2316-4fa4-9084-5438e5ac8e8c-0', usage_metadata={'input_tokens': 572, 'output_tokens': 32, 'total_tokens': 604, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 0}})]}}
----
Total Tokens: 1952
Prompt Tokens: 1781
Completion Tokens: 171
Total Cost (USD): $0.00036974999999999996
