{'agent': {'messages': [AIMessage(content='', additional_kwargs={'tool_calls': [{'id': 'call_uSpuGaQc5NpA2GWyPoDVND88', 'function': {'arguments': '{"type":"function"}', 'name': 'querying_db_blocks'}, 'type': 'function'}], 'refusal': None}, response_metadata={'token_usage': {'completion_tokens': 17, 'prompt_tokens': 722, 'total_tokens': 739, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 0, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-4o-2024-08-06', 'system_fingerprint': 'fp_eb9dce56a8', 'finish_reason': 'tool_calls', 'logprobs': None}, id='run-4b08b695-b849-4063-9a2d-f75c909ae0e3-0', tool_calls=[{'name': 'querying_db_blocks', 'args': {'type': 'function'}, 'id': 'call_uSpuGaQc5NpA2GWyPoDVND88', 'type': 'tool_call'}], usage_metadata={'input_tokens': 722, 'output_tokens': 17, 'total_tokens': 739, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 0}})]}}
----
{'tools': {'messages': [ToolMessage(content='["function list: ", [{"name": "get_periodical_cost", "description": "This query is used to retrieve total cost by given period.\\nCollections choices:  \\"receipts\\" for complete data or \\"non-receipts\\" for incomplete data, which was previously provided by user    \\nFormat date args: 2022-02-09 (year-month-day)\\n\\nArgs:    \\ncollection_name: str\\nstart_date: str\\nend_date: str\\nuser: str\\n\\n"}, {"name": "sum_two_numbers", "description": "This query is used to calculate the sum\\n\\nArgs:    \\na: float\\nb: float\\n"}, {"name": "get_total_cost_by_shop", "description": "This query is used to retrieve the total cost of purchases made at a specific shop.\\n    \\nArgs:\\n    collection_name: str - Name of the collection to query (\'receipts\' or \'non-receipts\')\\n    shop_name: str - Name of the shop to filter by\\n    user: str, optional - Username to filter results for a specific user\\n    \\nReturns:\\n    float - The total cost of all receipts from the specified shop"}]]', name='querying_db_blocks', id='b1a87406-7077-430e-ba1a-120faae80cee', tool_call_id='call_uSpuGaQc5NpA2GWyPoDVND88')]}}
----
{'agent': {'messages': [AIMessage(content='', additional_kwargs={'tool_calls': [{'id': 'call_zgNjsI47e9x7YI0VIrV8cQ7c', 'function': {'arguments': '{"mode":"add"}', 'name': 'cache_file_read'}, 'type': 'function'}], 'refusal': None}, response_metadata={'token_usage': {'completion_tokens': 16, 'prompt_tokens': 1003, 'total_tokens': 1019, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 0, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-4o-2024-08-06', 'system_fingerprint': 'fp_f9f4fb6dbf', 'finish_reason': 'tool_calls', 'logprobs': None}, id='run-a670853e-3f49-4774-8764-d1371fadf7b7-0', tool_calls=[{'name': 'cache_file_read', 'args': {'mode': 'add'}, 'id': 'call_zgNjsI47e9x7YI0VIrV8cQ7c', 'type': 'tool_call'}], usage_metadata={'input_tokens': 1003, 'output_tokens': 16, 'total_tokens': 1019, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 0}})]}}
----
{'tools': {'messages': [ToolMessage(content='data_extracted: {\'yearly_cost\': {\'name\': \'yearly_cost\', \'description\': \'result of total amount of spending per current year\', \'value\': 45.34, \'args\': \'\', \'function\': \'get_receipts_info\', \'update\': \'daily\', \'display\': 0}, \'monthly_cost\': {\'name\': \'monthly_cost\', \'description\': \'result of  total amount of spending last 2 months\', \'value\': 45.34, \'args\': \'\', \'function\': \'get_receipts_info\', \'update\': \'daily\', \'display\': 0}, \'daily_cost\': {\'name\': \'daily_cost\', \'description\': \'result of total amount of spending today\', \'value\': 5, \'args\': \'(2,3)\', \'function\': \'sum_two_numbers\', \'update\': \'never\', \'display\': 1}, \'first_2_days_previous_month_cost\': {\'name\': \'first_2_days_previous_month_cost\', \'description\': \'result of total amount of spending first 2 days of the previous month\', \'value\': 0, \'args\': \'receipts\', \'function\': \'get_periodical_cost\', \'update\': \'never\', \'display\': 0}, \'weekly_cost\': {\'name\': \'weekly_cost\', \'description\': \'calculates total amount of spending for the current week\', \'value\': 0, \'args\': "(\'receipts\', \'2025-02-22\', \'2025-02-28\', \'Giorgio\')", \'function\': \'get_periodical_cost\', \'update\': \'daily\', \'display\': 1}, \'total_spending_mega_image\': {\'name\': \'total_spending_mega_image\', \'description\': \'calculates total spending at Mega Image\', \'value\': 90.68, \'args\': "(\'receipts\', \'Mega Image\', \'Giorgio\')", \'function\': \'get_total_cost_by_shop\', \'update\': \'daily\', \'display\': 1}, \'total_spending_auchan\': {\'name\': \'total_spending_auchan\', \'description\': \'calculates total spending at Auchan\', \'value\': 0, \'args\': "(\'receipts\', \'Auchan\', \'Giorgio\')", \'function\': \'get_total_cost_by_shop\', \'update\': \'daily\', \'display\': 1}}', name='cache_file_read', id='2a12cce9-26f8-4ba6-a609-3e1fdbd85e61', tool_call_id='call_zgNjsI47e9x7YI0VIrV8cQ7c')]}}
----
{'agent': {'messages': [AIMessage(content='The total spending from Auchan is already being tracked and displayed on the user interface. The value is updated daily.', additional_kwargs={'refusal': None}, response_metadata={'token_usage': {'completion_tokens': 25, 'prompt_tokens': 1521, 'total_tokens': 1546, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 0, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-4o-2024-08-06', 'system_fingerprint': 'fp_eb9dce56a8', 'finish_reason': 'stop', 'logprobs': None}, id='run-8a0c3462-7d24-4612-b316-a0ba4d879311-0', usage_metadata={'input_tokens': 1521, 'output_tokens': 25, 'total_tokens': 1546, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 0}})]}}
----
