{'agent': {'messages': [AIMessage(content='', additional_kwargs={'tool_calls': [{'id': 'call_rS4EEfffpqEw95VQmjWRzzMA', 'function': {'arguments': '{"collection_name":"receipts"}', 'name': 'update_display_read'}, 'type': 'function'}], 'refusal': None}, response_metadata={'token_usage': {'completion_tokens': 18, 'prompt_tokens': 301, 'total_tokens': 319, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 0, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-4o-2024-08-06', 'system_fingerprint': 'fp_eb9dce56a8', 'finish_reason': 'tool_calls', 'logprobs': None}, id='run-e3467d36-34f6-4f47-a061-6982f26e4182-0', tool_calls=[{'name': 'update_display_read', 'args': {'collection_name': 'receipts'}, 'id': 'call_rS4EEfffpqEw95VQmjWRzzMA', 'type': 'tool_call'}], usage_metadata={'input_tokens': 301, 'output_tokens': 18, 'total_tokens': 319, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 0}})]}}
----
{'tools': {'messages': [ToolMessage(content='{"yearly_cost": {"name": "yearly_cost", "description": "current year", "value": 30, "collection": "receipts", "tool": "get_receipts_info", "display": 1}}', name='update_display_read', id='dd32d7a8-9d21-4620-94f4-4bf74ab163ba', tool_call_id='call_rS4EEfffpqEw95VQmjWRzzMA')]}}
----
{'agent': {'messages': [AIMessage(content='', additional_kwargs={'tool_calls': [{'id': 'call_UOH2Aea4AoBbbLRzXuxyy7N8', 'function': {'arguments': '{}', 'name': 'current_date'}, 'type': 'function'}], 'refusal': None}, response_metadata={'token_usage': {'completion_tokens': 11, 'prompt_tokens': 375, 'total_tokens': 386, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 0, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-4o-2024-08-06', 'system_fingerprint': 'fp_eb9dce56a8', 'finish_reason': 'tool_calls', 'logprobs': None}, id='run-4c614d3e-b79e-481a-abba-dfcbac5fde81-0', tool_calls=[{'name': 'current_date', 'args': {}, 'id': 'call_UOH2Aea4AoBbbLRzXuxyy7N8', 'type': 'tool_call'}], usage_metadata={'input_tokens': 375, 'output_tokens': 11, 'total_tokens': 386, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 0}})]}}
----
{'tools': {'messages': [ToolMessage(content='2025-02-20', name='current_date', id='48c65904-e973-4168-9489-4baa96638b52', tool_call_id='call_UOH2Aea4AoBbbLRzXuxyy7N8')]}}
----
{'agent': {'messages': [AIMessage(content='', additional_kwargs={'tool_calls': [{'id': 'call_BgxPUV6kNPFyTvSSrVoy8Y7s', 'function': {'arguments': '{"start_date":"2025-01-01","end_date":"2025-12-31"}', 'name': 'get_receipts_info'}, 'type': 'function'}], 'refusal': None}, response_metadata={'token_usage': {'completion_tokens': 33, 'prompt_tokens': 399, 'total_tokens': 432, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 0, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-4o-2024-08-06', 'system_fingerprint': 'fp_eb9dce56a8', 'finish_reason': 'tool_calls', 'logprobs': None}, id='run-dda41d44-c0ce-4fec-86bd-f01d9a7b9e6d-0', tool_calls=[{'name': 'get_receipts_info', 'args': {'start_date': '2025-01-01', 'end_date': '2025-12-31'}, 'id': 'call_BgxPUV6kNPFyTvSSrVoy8Y7s', 'type': 'tool_call'}], usage_metadata={'input_tokens': 399, 'output_tokens': 33, 'total_tokens': 432, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 0}})]}}
----
{'tools': {'messages': [ToolMessage(content='Error: UnboundLocalError("local variable \'total_cost\' referenced before assignment")\n Please fix your mistakes.', name='get_receipts_info', id='81714e4d-dfdd-44db-b32f-36dde3562683', tool_call_id='call_BgxPUV6kNPFyTvSSrVoy8Y7s', status='error')]}}
----
{'agent': {'messages': [AIMessage(content='It seems there is an error in retrieving the total cost for the current year. I\'m unable to update the displayed values for the "receipts" collection at the moment. Please try again later or contact support for assistance.', additional_kwargs={'refusal': None}, response_metadata={'token_usage': {'completion_tokens': 46, 'prompt_tokens': 463, 'total_tokens': 509, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 0, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-4o-2024-08-06', 'system_fingerprint': 'fp_eb9dce56a8', 'finish_reason': 'stop', 'logprobs': None}, id='run-de0be6a0-ae50-4c45-9dca-4749c6f49c22-0', usage_metadata={'input_tokens': 463, 'output_tokens': 46, 'total_tokens': 509, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 0}})]}}
----
Total Tokens: 1646
Prompt Tokens: 1538
Completion Tokens: 108
Total Cost (USD): $0.0049250000000000006
